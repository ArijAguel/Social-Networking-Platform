<div [dir]="'dir'|translate" class="sticky-button" [ngClass]="{'left': ('dir'|translate)==='ltr', 'right': ('dir'|translate)==='rtl'}">
    <button *ngIf="isEditable" (click)="save() " class="btn btn-success btn-xl help"><i class="fa-solid fa-floppy-disk" style="font-size: 20px;cursor: pointer;"></i>&nbsp;&nbsp;{{'SAVE'|translate}}</button><br> <br>
</div>
<div class="col-12 d-flex align-items-center justify-content-center mt-4 ml-2">
    <img alt="" src="{{etape22.project.logo | defaultimage :etape22.project.name:'':true}}" class="size-20 rounded-lg object-contain shadow-sm mr-3" />
    <h1 class="text-center flex-grow-1">{{'BUSINESS_ENVIRONMENT'|translate}}</h1>
</div>

<br>
<br>
<h4 *ngIf="isEditable" style="margin-left: 3%;position:relative">
    {{'DOWNLOAD_BUSINESS_ENVIRONMENT'|translate}} <a (click)="downloadPDF()" style="cursor: pointer;text-decoration: underline; font-weight: bold;">PDF</a> {{'OR'|translate}} <a style="cursor: pointer;text-decoration: underline; font-weight: bold;" (click)="downloadWord()">Word(.docs)</a>
</h4>
<form [formGroup]="etape2" (ngSubmit)="onSubmit()">
    <div class="main-conatiner" id="certificate">
        <p style="color: #172741;">{{'BUSINESS_ENVIRONMENT_DESCRIPTION'|translate}}</p>
        <h3 id="accordion-collapse-heading-1" style="font-size: 20px;position:relative">
            <button type="button" class="flex items-center justify-between w-full px-2 rtl:text-right text-gray-500 border border-b-0 border-gray-200 rounded-xl focus:ring-4 hover:bg-gray-100 gap-3" (click)="toggleAccordion(1)">
                <h2>{{'ENTREPRENEURS_CAPABILITIES'|translate}}</h2>
                <svg class="w-3 h-3 rotate-180 shrink-0" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 10 6">
                    <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5 5 1 1 5"/>
                </svg>
            </button>
        </h3>
        <div id="accordion-collapse-body-2" [ngClass]="{'hidden': !isOpen(1)}" class="p-5 border border-b-0 border-gray-200  rounded-xl mb-5">
            <div class="row center-div">
                <div class="col-12 center-div">
                </div>
                <div class="card mb-4 card-radius" style="border: none;">
                    <div class="card-body px-0 pt-0 pb-2 card-shadow">
                        <p>{{'ASSESS_CAPABILITIES'|translate}}</p>
                        <br>
                        <br>
                        <div class="form-dash">
                            <table class="table table-bordered">
                                <thead>
                                    <tr>
                                        <th scope="col"></th>
                                        <th scope="col" style="color: #c0aa81;">{{'STRENGTHS'|translate}}</th>
                                        <th scope="col" style="color: #c0aa81;">{{'WEAKNESSES'|translate}}</th>
                                        <th scope="col" style="color: #c0aa81;">{{'ACTIONS_TO_IMPLEMENT'|translate}}</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <th scope="row">{{'TECHNICAL_SKILLS'|translate}}</th>
                                        <td>
                                            <div class="form-group">
                                                <textarea dir="auto" type="text" formControlName="capacitesTechniques" rows="3" class="form-control" maxlength="255" name="capacitesTechniques" required></textarea>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="form-group">
                                                <textarea dir="auto" type="text" formControlName="lacunesTechniques" rows="3" class="form-control" maxlength="255" name="lacunesTechniques" required></textarea>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="form-group">
                                                <textarea dir="auto" type="text" formControlName="actionsTechniques" rows="3" class="form-control" maxlength="255" name="actionsTechniques" required></textarea>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <th scope="row">{{'SOFT_SKILLS'|translate}}</th>
                                        <td>
                                            <div class="form-group">
                                                <textarea dir="auto" type="text" formControlName="capacitesSoft" rows="3" class="form-control" maxlength="255" name="capacitesSoft" required></textarea>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="form-group">
                                                <textarea dir="auto" type="text" formControlName="lacunesSoft" rows="3" class="form-control" maxlength="255" name="lacunesSoft" required></textarea>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="form-group">
                                                <textarea dir="auto" type="text" formControlName="actionsSoft" rows="3" class="form-control" maxlength="255" name="actionsSoft" required></textarea>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <th scope="row">{{'PERSONAL_SITUATIONS'|translate}} </th>
                                        <td>
                                            <div class="form-group">
                                                <textarea dir="auto" type="text" formControlName="capacitesPersonnelles" rows="3" class="form-control" maxlength="255" name="capacitesPersonnelles" required></textarea>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="form-group">
                                                <textarea dir="auto" type="text" formControlName="lacunesPersonnelles" rows="3" class="form-control" maxlength="255" name="lacunesPersonnelles" required></textarea>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="form-group">
                                                <textarea dir="auto" type="text" formControlName="actionsPersonnelles" rows="3" class="form-control" maxlength="255" name="actionsPersonnelles" required></textarea>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <th scope="row">{{'PROFESSIONAL_NETWORK'|translate}}</th>
                                        <td>
                                            <div class="form-group">
                                                <textarea dir="auto" type="text" formControlName="capacitesProfessionnelles" rows="3" class="form-control" maxlength="255" name="capacitesProfessionnelles" required></textarea>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="form-group">
                                                <textarea dir="auto" type="text" formControlName="lacunesProfessionnelles" rows="3" class="form-control" maxlength="255" name="lacunesProfessionnelles" required></textarea>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="form-group">
                                                <textarea dir="auto" type="text" formControlName="actionsProfessionnelles" rows="3" class="form-control" maxlength="255" name="actionsProfessionnelles" required></textarea>
                                            </div>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
            <div>
                <div class="d-flex justify-content-around" style="position: relative;">
                    <button *ngIf="!isEditable&&canAddRemark" type="button" (click)="remarque('ENTREPRENEURS_CAPABILITIES')" class="btn btn-outline-primary noticed mt-2"><i class="fa-regular fa-lightbulb"></i> &nbsp; {{'ADD_REMARK'|translate}}</button>
                </div>
            </div>
        </div>

        <h3 id="accordion-collapse-heading-2" style="font-size: 20px;;position:relative">
            <button type="button" class="flex items-center justify-between w-full px-2 font-medium rtl:text-right text-gray-500 border border-b-0 border-gray-200 rounded-xl focus:ring-4 hover:bg-gray-100 gap-3" (click)="toggleAccordion(2)">
                <h2>{{'ENTREPRENEURS_RESOURCES'|translate}}</h2>
                <svg class="w-3 h-3 rotate-180 shrink-0" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 10 6">
                    <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5 5 1 1 5"/>
                </svg>
            </button>
        </h3>
        <div id="accordion-collapse-body-2" [ngClass]="{'hidden': !isOpen(2)}" class="p-5 border border-b-0 border-gray-200 rounded-xl mb-5">
            <div class="row center-div">
                <div class="col-12 center-div">
                </div>
                <div class="card mb-4 card-radius" style="border: none;">
                    <div class="card-body px-0 pt-0 pb-2 card-shadow">
                        <p>{{'ASSESS_COLLECTIVE_RESOURCES'|translate}}</p>
                        <br>
                        <p style="color: gray;margin: 30px;">{{'INVESTED_CAPITAL_DEBT'|translate}}</p>
                        <div class="form-dash" style="margin: 30px;">
                            <table class="table table-bordered" formArrayName="Financial">
                                <thead>
                                    <tr>
                                        <th scope="col" style="color: #c0aa81;">{{'FINANCIAL_RESOURCES'|translate}} </th>
                                        <th scope="col" style="color: #c0aa81;">{{'FOUNDER'|translate}}</th>
                                        <th scope="col" style="color: #c0aa81;">{{'VALUE'|translate}}</th>
                                        <th scope="col" style="color: #c0aa81;">{{'AVAILABILITY'|translate}}</th>
                                        <th scope="col" style="color: #c0aa81;"></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let ben of Financial().controls; trackBy: trackById; let i=index" [formGroupName]="i">
                                        <td>
                                            <select dir="auto" formControlName="name" class="form-select" required>
                                                <option value="Capital" selected>{{'CAPITAL'|translate}}</option>
                                                <option value="Debt">{{'DEBT_TO_COMPANY'|translate}}</option>
                                            </select>
                                        </td>
                                        <td>
                                            <input maxlength="255" dir="auto" type="text" formControlName="fondateur" class="form-control">
                                        </td>
                                        <td>
                                            <input maxlength="255" dir="auto" type="text" formControlName="description" class="form-control">
                                        </td>
                                        <td>
                                            <select dir="auto" formControlName="disponibilite" class="form-select" required>
                                                <option value="Immediate" selected>{{'IMMEDIATE'|translate}}</option>
                                                <option value="Delayed">{{'DELAYED'|translate}}</option>
                                            </select>
                                        </td>
                                        <td>
                                            <i *ngIf="i > 0 && isEditable " (click)="removeFinancial(i)" class="fa-solid fa-trash" style="color: red; font-size: 25px; margin-top: 10px;"></i>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                            <button style="margin-left: 2%;" *ngIf="isEditable" type="button" class="btn btn-outline-primary startnow exclude-from-pdf" (click)="this.addFinancial('','','','')">{{'ADD_RESOURCES'|translate}}</button>
                        </div>
                        <div class="form-dash" style="margin: 30px;">
                            <table class="table table-bordered" formArrayName="Material">
                                <thead>
                                    <tr>
                                        <th scope="col" style="color: #c0aa81;">{{'MATERIAL_RESOURCES'|translate}} </th>
                                        <th scope="col" style="color: #c0aa81;">{{'FOUNDER'|translate}}</th>
                                        <th scope="col" style="color: #c0aa81;">{{'VALUE'|translate}}</th>
                                        <th scope="col" style="color: #c0aa81;">{{'AVAILABILITY'|translate}}</th>
                                        <th scope="col" style="color: #c0aa81;"></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let ben of Material().controls; trackBy: trackById; let i=index" [formGroupName]="i">
                                        <td>
                                            <select dir="auto" formControlName="name" class="form-select" required>
                                                    <option value="Equipment" data-twe-toggle="tooltip" data-twe-placement="right" data-twe-ripple-init data-twe-ripple-color="light" title="{{'MACHINERY_TOOLS_ASSETS'|translate}}" selected>{{'EQUIPMENT'|translate}}</option>
                                                    <option value="Facilities" data-twe-toggle="tooltip" data-twe-placement="right" data-twe-ripple-init data-twe-ripple-color="light" title="{{'BUILDINGS_LAND_STRUCTURES'|translate}}">{{'FACILITIES'|translate}}</option>
                                                    <option value="Inventory" data-twe-toggle="tooltip" data-twe-placement="right" data-twe-ripple-init data-twe-ripple-color="light" title="{{'RAW_MATERIALS_GOODS'|translate}}">{{'INVENTORY'|translate}}</option>
                                                    <option value="Supplies" data-twe-toggle="tooltip" data-twe-placement="right" data-twe-ripple-init data-twe-ripple-color="light" title="{{'CONSUMABLE_ITEMS'|translate}}">{{'SUPPLIES'|translate}}</option>
                                                    <option value="Vehicles" data-twe-toggle="tooltip" data-twe-placement="right" data-twe-ripple-init data-twe-ripple-color="light" title="{{'TRANSPORTATION_ASSETS'|translate}}">{{'VEHICLES'|translate}}</option>
                                                    <option value="Other">{{'OTHER'|translate}}</option>
                                                </select>
                                        </td>
                                        <td>
                                            <input dir="auto" maxlength="255" type="text" formControlName="fondateur" class="form-control">
                                        </td>
                                        <td>
                                            <input dir="auto" maxlength="255" type="text" formControlName="description" class="form-control">
                                        </td>
                                        <td>
                                            <select dir="auto" formControlName="disponibilite" class="form-select" required>
                                                <option value="Immediate" selected>{{'IMMEDIATE'|translate}}</option>
                                                <option value="Delayed">{{'DELAYED'|translate}}</option>
                                            </select>
                                        </td>
                                        <td>
                                            <i *ngIf="i > 0 && isEditable " (click)="removeMaterial(i)" class="fa-solid fa-trash" style="color: red; font-size: 25px; margin-top: 10px;"></i>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                            <button style="margin-left: 2%;" *ngIf="isEditable" type="button" class="btn btn-outline-primary startnow exclude-from-pdf" (click)="addMaterial('','','','')">{{'ADD_RESOURCES'|translate}}</button>
                        </div>
                        <div class="form-dash" style="margin: 30px;">
                            <table class="table table-bordered" formArrayName="Immaterielle">
                                <thead>
                                    <tr>
                                        <th scope="col" style="color: #c0aa81;">{{'INTANGIBLE_RESOURCES'|translate}} </th>
                                        <th scope="col" style="color: #c0aa81;">{{'FOUNDER'|translate}}</th>
                                        <th scope="col" style="color: #c0aa81;">{{'VALUE'|translate}}</th>
                                        <th scope="col" style="color: #c0aa81;">{{'AVAILABILITY'|translate}}</th>
                                        <th scope="col" style="color: #c0aa81;"></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let ben of Immaterielle().controls; trackBy: trackById; let i=index" [formGroupName]="i">
                                        <td>
                                            <select dir="auto" formControlName="name" class="form-select" required>
                                                    <option value="Intellectual Property" data-twe-toggle="tooltip" data-twe-placement="right" data-twe-ripple-init data-twe-ripple-color="light" title="{{'INTELLECTUAL_PROPERTY'|translate}}" selected>{{'INTELLECTUAL_PROPERTY1'|translate}}</option>
                                                    <option value="Brand Reputation" data-twe-toggle="tooltip" data-twe-placement="right" data-twe-ripple-init data-twe-ripple-color="light" title="{{'BRAND_REPUTATION'|translate}}" >{{'BRAND_REPUTATION1'|translate}}</option>
                                                    <option value="Human Capital" data-twe-toggle="tooltip" data-twe-placement="right" data-twe-ripple-init data-twe-ripple-color="light" title="{{'HUMAN_CAPITAL'|translate}}" >{{'HUMAN_CAPITAL1'|translate}}</option>
                                                    <option value="Organizational Culture" data-twe-toggle="tooltip" data-twe-placement="right" data-twe-ripple-init data-twe-ripple-color="light" title="{{'ORGANIZATIONAL_CULTURE'|translate}}" > {{'ORGANIZATIONAL_CULTURE1'|translate}}</option>
                                                    <option value="Relationships and Networks" data-twe-toggle="tooltip" data-twe-placement="right" data-twe-ripple-init data-twe-ripple-color="light" title=" {{'RELATIONSHIPS_NETWORKS'|translate}}" >{{'RELATIONSHIPS_NETWORKS1'|translate}}</option>
                                                    <option value="Innovation and R&D Capabilities" data-twe-toggle="tooltip" data-twe-placement="right" data-twe-ripple-init data-twe-ripple-color="light" title="{{'INNOVATION_RD_CAPABILITIES'|translate}}" >{{'INNOVATION_RD_CAPABILITIES1'|translate}}</option>
                                                    <option value="Business Processes and Systems" data-twe-toggle="tooltip" data-twe-placement="right" data-twe-ripple-init data-twe-ripple-color="light" title="{{'BUSINESS_PROCESSES_SYSTEMS'|translate}}" >  {{'BUSINESS_PROCESSES_SYSTEMS1'|translate}}</option>
                                                    <option value="Data and Information Assets" data-twe-toggle="tooltip" data-twe-placement="right" data-twe-ripple-init data-twe-ripple-color="light" title="{{'DATA_INFORMATION_ASSETS'|translate}}" >{{'DATA_INFORMATION_ASSETS1'|translate}}</option>
                                                    <option value="Software and source codes">{{'SOFTWARE_SOURCE_CODES'|translate}}</option>
                                                    <option value="Others">{{'OTHERS'|translate}}</option>
                                            </select>
                                        </td>
                                        <td>
                                            <input maxlength="255" dir="auto" type="text" formControlName="fondateur" class="form-control">
                                        </td>
                                        <td>
                                            <input maxlength="255" dir="auto" type="text" formControlName="description" class="form-control">
                                        </td>
                                        <td>
                                            <select dir="auto" formControlName="disponibilite" class="form-select" required>
                                                <option value="Immediate" selected>{{'IMMEDIATE'|translate}}</option>
                                                <option value="Delayed">{{'DELAYED'|translate}}</option>
                                            </select>
                                        </td>
                                        <td>
                                            <i *ngIf="i > 0 && isEditable " (click)="removeImmaterielle(i)" class="fa-solid fa-trash" style="color: red; font-size: 25px; margin-top: 10px;"></i>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                            <button style="margin-left: 2%;" *ngIf="isEditable" type="button" class="btn btn-outline-primary startnow exclude-from-pdf" (click)="this.addImmaterielle('','','','')">{{'ADD_RESOURCES'|translate}}</button>
                        </div>
                    </div>
                </div>
            </div>
            <div>
                <div class="d-flex justify-content-around" style="position: relative;">
                    <button *ngIf="!isEditable&&canAddRemark" type="button" (click)="remarque('ENTREPRENEURS_RESOURCES')" class="btn btn-outline-primary noticed mt-2"><i class="fa-regular fa-lightbulb"></i> &nbsp; {{'ADD_REMARK'|translate}}</button>
                </div>
            </div>
        </div>

        <h3 id="accordion-collapse-heading-3" style="font-size: 20px;;position:relative">
            <button type="button" class="flex items-center justify-between w-full px-2 font-medium rtl:text-right text-gray-500 border border-b-0 border-gray-200 rounded-xl focus:ring-4 hover:bg-gray-100 gap-3" (click)="toggleAccordion(3)">
            <h2>{{'MAPPING_COMPANY_REGION'|translate}}:<i class="fa-regular fa-circle-question" style="font-size: 20px;cursor: pointer;" (click)="infoCartographie()"></i></h2>
                <svg class="w-3 h-3 rotate-180 shrink-0" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 10 6">
                    <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5 5 1 1 5"/>
                </svg>
            </button>
        </h3>
        <div id="accordion-collapse-body-2" [ngClass]="{'hidden': !isOpen(3)}" class="p-5 border border-b-0 border-gray-200 rounded-xl mb-5">
            <div>
                <div class="col-12 center-div">
                </div>
                <div class="card mb-4 card-radius" style=" border: none;">

                    <div class="card-body px-0 pt-0 pb-2 card-shadow">
                        <p>{{'BUILDING_RESILIENCE'|translate}}
                            <br>{{''|translate}}</p>
                        <br>
                        <div class="form-dash">
                            <table class="table" formArrayName="newfieldtable">
                                <tr *ngFor="let ben of newfieldtable().controls; trackBy: trackById; let i=index" [formGroupName]="i">
                                    <td>
                                        <div class="form-group row justify-content-center">
                                            <label class="col-sm-2 col-form-label">{{(newfieldtable().at(i).get('nom')?.value)|translate}}</label>
                                            <div class="col-sm-5">
                                                <input dir="auto" type="text" [formControlName]="'valeur'" class="form-control" required>
                                            </div>
                                            <i *ngIf=" isEditable" class="col-sm-1 fa-solid fa-trash" (click)="removenewfieldtable(i)" style="color: red; font-size: 25px;margin-top: 10px;"></i>
                                        </div>
                                        <br>
                                    </td>
                                </tr>

                            </table>
                            <div class="form-group row justify-content-center">
                                <div class="col-sm-6">
                                    <input placeholder="{{'FIELD_NAME'|translate}}" type="text" formControlName="newField" class="form-control" name="newField" required>
                                </div>
                                <div class="col-sm-2">
                                    <button type="button" *ngIf="isEditable" class="btn btn-outline-primary startnow exclude-from-pdf" (click)="addnewField()">{{'ADD_FIELD'|translate}}</button>
                                </div>
                            </div><br>
                        </div>
                    </div>
                </div>
            </div>
            <div class="d-flex justify-content-around" style="position: relative;">
                <button *ngIf="!isEditable&&canAddRemark" type="button" (click)="remarque('MAPPING_COMPANY_REGION')" class="btn btn-outline-primary noticed mt-2"><i class="fa-regular fa-lightbulb"></i> &nbsp; {{'ADD_REMARK'|translate}}</button>
            </div>
        </div>

        <h3 id="accordion-collapse-heading-4" style="font-size: 20px;position:relative">
            <button type="button" class="flex items-center justify-between w-full px-2 font-medium rtl:text-right text-gray-500 border border-b-0 border-gray-200 rounded-xl focus:ring-4 hover:bg-gray-100 gap-3" (click)="toggleAccordion(4)">
            <h2>{{'SOCIAL_NEEDS'|translate}}</h2>
                <svg class="w-3 h-3 rotate-180 shrink-0" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 10 6">
                    <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5 5 1 1 5"/>
                </svg>
            </button>
        </h3>
        <div id="accordion-collapse-body-2" [ngClass]="{'hidden': !isOpen(4)}" class="p-5 border border-b-0 border-gray-200 rounded-xl mb-5">
            <div class="row center-div">
                <div class="col-12 center-div">
                </div>
                <div class="card mb-4 card-radius" style="border: none;">
                    <div class="card-body px-0 pt-0 pb-2 card-shadow">
                        <p>{{'IDENTIFY_REGION_NEEDS'|translate}}</p>
                        <br>
                        <div class="form-dash" style="margin: 30px;">
                            <table class="table table-bordered" formArrayName="Besoin">
                                <thead>
                                    <tr>
                                        <th scope="col" style="color: #c0aa81;">{{'NEEDS'|translate}}</th>
                                        <th scope="col" style="color: #c0aa81;">{{'TYPE_OF_NEED'|translate}}</th>
                                        <th scope="col" style="color: #c0aa81;">{{'IMPORTANCE'|translate}} </th>
                                        <th scope="col" style="color: #c0aa81;">{{'RECURRENCE'|translate}}</th>
                                        <th scope="col" style="color: #c0aa81;"></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let ben of Besoin().controls; trackBy: trackById; let i=index" [formGroupName]="i">
                                        <td>
                                            <input maxlength="255" dir="auto" type="text" formControlName="nom" class="form-control">
                                        </td>
                                        <td>
                                            <select dir="auto" formControlName="type" class="form-select" required>
                                                    <option value="Environmental" selected>{{'ENVIRONMENTAL'|translate}}</option>
                                                    <option value="Employment">{{'EMPLOYMENT'|translate}}</option>
                                                    <option value="Women empowerment">{{'WOMEN_EMPOWERMENT'|translate}}</option>
                                                    <option value="Children rights ">{{'CHILDREN_RIGHTS'|translate}}  </option>
                                                    <option value="Animal rights">{{'ANIMAL_RIGHTS'|translate}}</option>
                                                    <option value="Young people">{{'YOUNG_PEOPLE'|translate}}</option>
                                                    <option value="Poverty">{{'POVERTY'|translate}}</option>
                                                    <option value="Quality of life">{{'QUALITY_OF_LIFE'|translate}}</option>
                                                    <option value="Other">{{'OTHER'|translate}}</option>
                                                </select>
                                        </td>
                                        <td>
                                            <select dir="auto" formControlName="importance" class="form-select" required>
                                                    <option value="Not important" selected>{{'NOT_IMPORTANT'|translate}}</option>
                                                    <option value="Moderately important ">{{'MODERATELY_IMPORTANT'|translate}}</option>
                                                    <option value="Very important">{{'VERY_IMPORTANT'|translate}} </option>
                                                </select>
                                        </td>
                                        <td>
                                            <select dir="auto" formControlName="recurrence" class="form-select" required>
                                                    <option value="Rare" selected>{{'RARE'|translate}}</option>
                                                    <option value="Common">{{'COMMON'|translate}}</option>
                                                    <option value="Frequent">{{'FREQUENT'|translate}}</option>
                                                </select>
                                        </td>
                                        <td>
                                            <i *ngIf="i > 0  && isEditable" (click)="removeBesoin(i)" class="fa-solid fa-trash" style="color: red; font-size: 25px; margin-top: 10px;"></i>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                            <button *ngIf="isEditable" type="button" class="btn btn-outline-primary startnow exclude-from-pdf" (click)="addBesoin('','','','')">{{'ADD_A_NEED'|translate}}</button>
                        </div>
                        <p>{{'FIND_CONNECTION'|translate}}</p>
                        <div class="form-dash" style="margin: 30px;">
                            <textarea dir="auto" type="text" formControlName="conclusion" rows="5" class="form-control" name="conclusion" required></textarea>
                        </div>
                    </div>
                </div>
            </div>
            <div class="d-flex justify-content-around" style="position: relative;">
                <button *ngIf="!isEditable&&canAddRemark" type="button" (click)="remarque('SOCIAL_NEEDS')" class="btn btn-outline-primary noticed mt-2"><i class="fa-regular fa-lightbulb"></i> &nbsp; {{'ADD_REMARK'|translate}}</button>
            </div>
        </div>

        <h3 id="accordion-collapse-heading-5" style="font-size: 20px;position:relative">
            <button type="button" class="flex items-center justify-between w-full px-2 font-medium rtl:text-right text-gray-500 border border-b-0 border-gray-200 rounded-xl focus:ring-4 hover:bg-gray-100 gap-3" (click)="toggleAccordion(5)">
            <h2>{{'LOCAL_ACTORS'|translate}}</h2>
                <svg class="w-3 h-3 rotate-180 shrink-0" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 10 6">
                    <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5 5 1 1 5"/>
                </svg>
            </button>
        </h3>
        <div id="accordion-collapse-body-2" [ngClass]="{'hidden': !isOpen(5)}" class="p-5 border border-b-0 border-gray-200 rounded-xl mb-5">
            <div class="row center-div">
                <div class="col-12 center-div">
                </div>
                <div class="card mb-4 card-radius" style="border: none;">

                    <div class="card-body px-0 pt-0 pb-2 card-shadow">
                        <ul style="list-style-type: circle;">
                            <li>{{'IDENTIFY_LOCAL_ACTORS'|translate}}</li>
                            <li>{{'CATEGORIZE_THEM'|translate}}</li>
                            <li>{{'ANALYZE_THEM'|translate}}</li>
                            <li>{{'ASSESS_INTEREST_INFLUENCE'|translate}}</li>
                        </ul>
                        <br>
                        <div class="form-dash" style="margin: 30px;">
                            <table class="table table-bordered" formArrayName="Actor">
                                <thead>
                                    <tr>
                                        <th scope="col" style="color: #c0aa81;">{{'LOCAL_ACTOR'|translate}}</th>
                                        <th scope="col" style="color: #c0aa81;">{{'RANKING'|translate}}</th>
                                        <th scope="col" style="color: #c0aa81;">{{'ANALYSIS'|translate}}</th>
                                        <th scope="col" style="color: #c0aa81;">{{'INTEREST_INFLUENCE_LEVEL'|translate}}</th>
                                        <th scope="col" style="color: #c0aa81;"></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let ben of Actor().controls; trackBy: trackById; let i=index" [formGroupName]="i">
                                        <td>
                                            <input maxlength="255" type="text" formControlName="nom" class="form-control">
                                        </td>
                                        <td>
                                            <select dir="auto" formControlName="classement" class="form-select" required>
                                                <option value="Governments and regulatory authorities" selected>{{'GOVERNMENTS_AND_AUTHORITIES'|translate}}</option>
                                                <option value="Communities affected by the project">{{'AFFECTED_COMMUNITIES'|translate}}</option>
                                                <option value="Commercial companies and organizations">{{'COMMERCIAL_COMPANIES'|translate}}</option>
                                                <option value="Internal stakeholders">{{'INTERNAL_STAKEHOLDERS'|translate}}</option>
                                            </select>
                                        </td>
                                        <td>
                                            <textarea dir="auto" type="text" formControlName="analyse" rows="3" class="form-control" name="analyse" required></textarea>
                                        </td>
                                        <td>
                                            <select dir="auto" formControlName="niveauInteretInfluence" class="form-select" required>
                                                    <option value="low / low" selected>{{'LOW_LOW'|translate}}</option>
                                                    <option value="low/high">{{'LOW_HIGH'|translate}}</option>
                                                    <option value="high/low">{{'HIGH_LOW'|translate}}</option>
                                                    <option value="high / high">{{'HIGH_HIGH'|translate}}</option>
                                                </select>
                                        </td>
                                        <td>
                                            <i *ngIf="i > 0  && isEditable" (click)="removeActor(i)" class="fa-solid fa-trash" style="color: red; font-size: 25px; margin-top: 10px;"></i>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                            <button *ngIf="isEditable" type="button" class="btn btn-outline-primary startnow exclude-from-pdf" (click)="addActor('','','','')">{{'ADD_AN_ACTOR'|translate}}</button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="d-flex justify-content-around" style="position: relative;">
                <button *ngIf="!isEditable&&canAddRemark" type="button" (click)="remarque('LOCAL_ACTORS')" class="btn btn-outline-primary noticed mt-2"><i class="fa-regular fa-lightbulb"></i> &nbsp; {{'ADD_REMARK'|translate}}</button>
            </div>
        </div>
        <h3 id="accordion-collapse-heading-6" style="font-size: 20px;position:relative">
            <button type="button" class="flex items-center justify-between w-full px-2 font-medium rtl:text-right text-gray-500 border border-b-0 border-gray-200 rounded-t-xl focus:ring-4 hover:bg-gray-100 gap-3 rounded-xl" (click)="toggleAccordion(6)">
                        <h2 style="text-align: center;text-decoration: underline;align-items: center;">{{'PROPOSAL_BUSINESS_IDEAS'|translate}}</h2>
                <svg class="w-3 h-3 rotate-180 shrink-0" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 10 6">
                    <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5 5 1 1 5"/>
                </svg>
            </button>
        </h3>
        <div id="accordion-collapse-body-2" [ngClass]="{'hidden': !isOpen(6)}" class="p-5 border border-b-0 border-gray-200 rounded-xl mb-5">
            <div class="row center-div">
                <div class="col-12 center-div">
                </div>

                <div class="card mb-4 card-radius" style="border: none;">

                    <div class="card-body px-0 pt-0 pb-2 card-shadow">
                        <p>{{'ANALYZE_INFORMATION'|translate}}
                            <br>{{'PLACE_IDEA_FIRST_BOX'|translate}}</p>
                        <br>
                        <div class="form-dash" style="margin: 30px;">
                            <input dir="auto" type="text" formControlName="idee1" class="form-control" name="idee1" required placeholder="{{'IDEA1'|translate}}"><br>
                            <input dir="auto" type="text" formControlName="idee2" class="form-control" name="idee2" required placeholder="{{'IDEA2'|translate}}"><br>
                            <input dir="auto" type="text" formControlName="idee3" class="form-control" name="idee3" required placeholder="{{'IDEA3'|translate}}">
                        </div>
                    </div>
                </div>
            </div>
            <div class="d-flex justify-content-around" style="position: relative;">
                <button *ngIf="!isEditable&&canAddRemark" type="button" (click)="remarque('PROPOSAL_BUSINESS_IDEAS')" class="btn btn-outline-primary noticed mt-2"><i class="fa-regular fa-lightbulb"></i> &nbsp; {{'ADD_REMARK'|translate}}</button>
            </div>
        </div>

    </div>
    <br>
    <br>
    <div class="flex justify-content-around mt-8" style="position:relative;">
        <button type="button" class="btn btn-outline-primary startnow"><a  [routerLink]="'/feed/etape/' + projectId + '/1'">{{''|translate}}{{'PREVIOUS_STEP'|translate}}</a></button>
        <button type="button" (click)="onSubmit()" class="btn btn-outline-primary startnow">{{''|translate}}{{'NEXT_STEP'|translate}}</button>
    </div>
</form>

<p-dialog [(visible)]="Cartographie" [modal]="true" [style]="{ width: '50vw', 'overflow':'hidden' }" [draggable]="false" [resizable]="false" [maximizable]="true">
    <h4 style="color: #c0aa81; text-align: center;font-size: 25px;font-weight: bold;">{{'BUSINESS_ENVIRONMENT'|translate}}</h4>
    <div style="display: flex; justify-content: center; align-items: center; height: 100%;">
        <iframe width="560" height="315" [src]="videoUrl" frameborder="0" allowfullscreen></iframe>
    </div>
</p-dialog>
<p-dialog [(visible)]="showremarque" [modal]="true" [style]="{ width: '50vw', 'overflow':'hidden' }" [draggable]="false" [resizable]="false" [maximizable]="true">
    <h4 style="color: #c0aa81; text-align: center;font-size: 25px;font-weight: bold;">{{'REMARK'|translate}}</h4>
    <div class="d-flex flex justify-content-center" style="text-align: center;">
        <textarea #remarqueTextarea name="remarque" cols="50" rows="10" placeholder="{{'WRITE_REMARK'|translate}}" style="display: block;border-radius: 10px;border: 2px solid #c0aa81;"></textarea>
        <br>
    </div>
    <button type="button" class="btn btn-outline-primary startnow" style="display: block;" (click)="sendRemark(remarqueTextarea.value)">{{'SEND'|translate}}</button>
</p-dialog>
